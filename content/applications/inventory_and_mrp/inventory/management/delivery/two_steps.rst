==========================================================
如何通过两步（拣货 + 发货）处理发货订单？
==========================================================

概述
========

当订单进入发货部门进行最终交付时，Odoo默认设置为使用**一步操作**：一旦所有商品都可用，它们可以在一个发货订单中发货。然而，贵公司的业务流程可能在发货前有一个或多个步骤。在**两步**流程中，发货订单中的物品在仓库中被**拣选**并送至**出库位置**进行**发货**。然后，商品被发出。

为了在Odoo中完成**拣货 + 发货**的交付，需要进行一些必要的配置步骤。这些步骤会创建一个额外的位置，默认情况下称为**Output**。因此，如果您的仓库代码是``WH``，此配置将创建一个称为``WH/Output``的位置。商品将在第一步（拣货）中从``WH/Stock``移动到``WH/Output``。然后，在第二步（发货）中，它们从``WH/Output``移动到``WH/Customers``（在销售订单的情况下）。

.. note::
    查看 :doc:`inventory_flow` 以确定这种库存流程是否适合您的需求。

配置
=============

允许管理路线
--------------------------

Odoo通过**路线**配置发货订单的移动。路线提供了一种将不同操作链接在一起的机制。在这种情况下，我们将拣货步骤与发货步骤链接起来。

要允许管理路线，请转到 :menuselection:`Configuration --> Settings`。

确保选中**使用规则的产品高级路由**单选按钮。

.. image:: media/two_steps05.png
   :align: center

点击页面顶部的**应用**以保存更改（如果您需要选中上面的单选按钮）。

.. note::
    如果您选中了**使用规则的产品高级路由**选项，您可能需要激活**每个仓库管理多个位置**，如果它之前未激活。

配置仓库进行拣货 + 发货
------------------------------------

要配置**拣货 + 发货**操作，请转到 :menuselection:`Configuration --> Warehouses` 并编辑将要使用的仓库。

对于出库发货，将选项设置为**在发货前将商品带到出库位置（拣货 + 发货）**

.. image:: media/two_steps03.png
   :align: center

创建销售订单
====================

安装**销售**模块（如果尚未安装），并创建一个需要交付的产品销售订单。

注意，现在我们在销售订单上方的**发货**状态按钮中看到与该销售订单关联的``2``个转运。

.. image:: media/two_steps01.png
   :align: center

如果您点击**2 个转运**状态按钮，您现在应该会看到两个不同的拣货，一个参考为**PICK**，表示拣货过程，另一个参考为**OUT**，表示发货过程。

.. image:: media/two_steps04.png
   :align: center

处理发货
==================

如何处理拣货步骤？
--------------------------------

确保您有足够的库存产品，然后转到**库存**并点击**拣货**看板卡片下的**等待**链接。

.. image:: media/two_steps06.png
   :align: center

点击您要处理的拣货。

如果产品可用，请点击**预定**以预留产品。

点击**验证**以完成从``WH/Stock``到``WH/Output``的移动。

这完成了拣货步骤，**WH/PICK**移动现在应该在页面顶部的状态列中显示为**完成**。产品已经从``WH/Stock``移动到``WH/Output``位置，这使得产品**可用于下一步**（发货）。

如何处理发货步骤？
---------------------------------

转到**库存**并点击**发货订单**看板卡片下的**# 待办**链接。

.. image:: media/two_steps02.png
   :align: center

点击您要处理的拣货。

点击**验证**以完成从``WH/Output``到客户的移动（点击**应用**以根据**待办**列中的数量分配数量）

这完成了发货步骤，**WH/OUT**移动现在应该在页面顶部的状态列中显示为**完成**。产品已发货到客户。

.. todo::
    当这些部分可用时链接到这些部分
    -  流程概述：从销售订单到发货订单

    -  流程概述：从采购订单到接收
