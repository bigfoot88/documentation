:code-column:
:custom-css: accounting.css
:custom-js: coa-valuation-anglo-saxon.js,misc.js

==========================================================
如何进行库存估值？（英美会计法）
==========================================================

每年，你的库存估值都必须记录在资产负债表中。这涉及到两个主要选择：

- 计算库存物品成本的方法（标准成本 vs. 平均成本 vs. 实际价格）；
- 将库存价值记录在账簿中的方式（定期 vs. 永续）。

成本计算方法
==============
.. rst-class:: alternatives doc-aside

标准成本
  .. rst-class:: values-table

  .. list-table::
     :widths: 28 18 18 18 18
     :header-rows: 1
     :stub-columns: 1

     * - 操作
       - 单位成本
       - 现有数量
       - 差额
       - 库存价值
     * -
       - $10
       - 0
       -
       - $0
     * - 接收8件产品，单价$10
       - $10
       - 8
       - +8*$10
       - $80
     * - 接收4件产品，单价$16
       - $10
       - 12
       - +4*$10
       - $120
     * - 发出10件产品
       - $10
       - 2
       - | -10*$10
         |
       - $20
     * - 接收2件产品，单价$9
       - $10
       - 4
       - +2*$10
       - $40

  **标准成本**是指你根据直接材料、直接人工和制造费用在特定期间（通常是一年一次）结束时估算成本价格。你将这个成本价格输入产品表单。

平均成本
  .. rst-class:: values-table

  .. list-table::
     :widths: 28 18 18 18 18
     :header-rows: 1
     :stub-columns: 1

     * - 操作
       - 单位成本
       - 现有数量
       - 差额
       - 库存价值
     * -
       - $0
       - 0
       -
       - $0
     * - 接收8件产品，单价$10
       - $10
       - 8
       - +8*$10
       - $80
     * - 接收4件产品，单价$16
       - $12
       - 12
       - +4*$16
       - $144
     * - 发出10件产品
       - $12
       - 2
       - | -10*$12
         |
       - $24
     * - 接收2件产品，单价$6
       - $9
       - 4
       - +2*$6
       - $36

  **平均成本**方法是在处理接收订单时重新计算成本价格，基于在关联采购订单中定义的价格：
  公式（见附件）

  当产品离开仓库时，平均成本不变。

  从会计角度来看，此方法主要在采购价格变化巨大的情况下使用，由于其操作复杂性，这种方法比较少见。你实际上需要像 Odoo 这样的软件来轻松保持这个成本的最新。

  此方法适用于高级用户。它需要完善的业务流程，因为你处理接收订单的顺序在成本计算中很重要。

FIFO（先进先出）
  .. rst-class:: values-table

  .. list-table::
     :widths: 28 18 18 18 18
     :header-rows: 1
     :stub-columns: 1

     * - 操作
       - 单位成本
       - 现有数量
       - 差额
       - 库存价值
     * -
       - $0
       - 0
       -
       - $0
     * - 接收8件产品，单价$10
       - $10
       - 8
       - +8*$10
       - $80
     * - 接收4件产品，单价$16
       - $12
       - 12
       - +4*$16
       - $144
     * - 发出10件产品
       - $16
       - 2
       - | -8*$10
         | -2*$16
       - $32
     * - 接收2件产品，单价$6
       - $11
       - 4
       - +2*$6
       - $44

  对于**实际价格**（FIFO，LIFO，FEFO等），成本进一步由仓库位置或产品的内部类别上设置的移除策略细化。默认策略是FIFO。使用这种方法，你的库存价值是根据存储产品的实际成本（参考定量估值）计算的，而不是产品表单中显示的成本价格。每当你发货时，成本价格会重置为最后一批发货的成本。这一成本价格用于估值任何非采购订单接收的产品（例如库存调整）。

  如果你在 Odoo 中管理所有工作流（销售，采购，库存），建议使用 FIFO。它适用于任何类型的用户。

LIFO（不被IFRS接受）
  .. rst-class:: values-table

  .. list-table::
     :widths: 28 18 18 18 18
     :header-rows: 1
     :stub-columns: 1

     * - 操作
       - 单位成本
       - 现有数量
       - 差额
       - 库存价值
     * -
       - $0
       - 0
       -
       - $0
     * - 接收8件产品，单价$10
       - $10
       - 8
       - +8*$10
       - $80
     * - 接收4件产品，单价$16
       - $12
       - 12
       - +4*$16
       - $144
     * - 发出10件产品
       - $10
       - 2
       - | -4*$16
         | -6*$10
       - $20
     * - 接收2件产品，单价$6
       - $8
       - 4
       - +2*$6
       - $32

  对于**实际价格**（FIFO，LIFO，FEFO等），成本进一步由仓库位置或产品的内部类别上设置的移除策略细化。默认策略是FIFO。使用这种方法，你的库存价值是根据存储产品的实际成本（参考定量估值）计算的，而不是产品表单中显示的成本价格。每当你发货时，成本价格会重置为最后一批发货的成本。这一成本价格用于估值任何非采购订单接收的产品（例如库存调整）。

  LIFO 在美国以外地区不被允许。

Odoo 允许任何方法。默认方法是**标准成本**。要更改它，请在采购设置中勾选**使用“固定”、“实际”或“平均”价格成本方法**。然后从产品的内部类别设置成本方法。类别显示在产品表单的库存标签中。

无论使用哪种方法，Odoo 在 :menuselection:`库存 --> 报表 --> 库存估值` 中提供完整的库存估值（即当前库存数量*成本价格）。

定期库存估值
============================

在定期库存估值中，货物接收和发货对会计没有直接影响。每月或每年结束时，会计师会记录一个代表实物库存价值的会计分录。

这是 Odoo 的默认配置，并且开箱即用。检查以下操作并了解 Odoo 如何管理会计分录。

.. rst-class:: alternatives doc-aside

供应商账单
  .. rst-class:: values-table

  ============================= ===== ======
  \                             Debit Credit
  ============================= ===== ======
  Assets: Inventory                50
  Assets: Deferred Tax Assets    4.68
  Liabilities: Accounts Payable        54.68
  ============================= ===== ======

  配置：
    * 采购商品：在产品或相关产品的内部类别中定义（费用账户字段）
    * 递延税资产：在采购订单行使用的税上定义
    * 应付账款：在与账单相关的供应商上定义
货物接收
  无会计分录
客户发票
  .. rst-class:: values-table

  ===================================== ===== ======
  \                                     Debit Credit
  ===================================== ===== ======
  Revenues: Sold Goods                           100
  Liabilities: Deferred Tax Liabilities            9
  Assets: Accounts Receivable             109
  ===================================== ===== ======

  配置：
    * 收入：在产品或相关产品的内部类别中定义（收入账户字段）
    * 递延税负债：在发票行使用的税上定义
    * 应收账款：在客户上定义（应收账户）

  发票使用的财务职位可能有一个规则，将产品上定义的收入账户或税替换为

另一个。

客户发货
  无会计分录
生产订单
  无会计分录

.. raw:: html

   <hr style="float: none; visibility: hidden; margin: 0;">

在月/年末，你的公司进行实物库存盘点或仅依赖 Odoo 中的库存来评估库存价值到你的账簿中。

然后你需要使用以下公式将采购余额细分为库存和销售成本：

销售成本（COGS） = 起始库存价值 + 采购 - 期末库存价值

要在账簿中更新库存估值，记录以下分录：

.. h:div:: doc-aside

   .. rst-class:: values-table

  ===================================== ===== ======
  \                                     借方 贷方
  ===================================== ===== ======
  资产：库存（期末价值）                 X     
  费用：销售成本                         X
  费用：采购商品                                 X
  资产：库存（期初价值）                             X            
  ===================================== ===== ======

永续库存估值
=============================

在永续库存估值中，货物接收和发货会实时记入账簿。因此，账簿始终是最新的。这种模式仅适用于专业会计师和高级用户。与定期估值相比，它需要一些额外的配置和测试。

让我们以一个经销商为例。

.. h:div:: valuation-chart-anglo-saxon doc-aside

   .. placeholder

.. raw:: html

   <hr style="float: none; visibility: hidden; margin: 0;">

.. h:div:: doc-aside

   **配置：**

   - 应收/应付账款：在合作伙伴的会计标签上定义
   - 递延税资产/负债：在发票行使用的税上定义
   - 收入：作为默认值在产品类别上定义，或特定产品上具体设置。
   - 费用：这是你应该设置“销售成本”账户的地方。作为默认值在产品类别上定义，或在产品表单上具体设置。
   - 已收货但未购买：在产品的内部类别中设置为库存输入账户
   - 已发货但未开票：在产品的内部类别中设置为库存输出账户
   - 库存：在产品的内部类别中设置为库存估值账户
   - 价格差异：在产品的内部类别或产品表单中设置为具体的替代值

.. seealso::

  * :doc:`../../routes/strategies/removal`
  * :doc:`/applications/finance/accounting/others/inventory/avg_price_valuation`
  * :doc:`../../routes/costing/landed_costs`
