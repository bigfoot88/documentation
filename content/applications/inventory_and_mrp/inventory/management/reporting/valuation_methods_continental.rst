:code-column:
:custom-css: accounting.css
:custom-js: coa-valuation-continental.js,misc.js

==========================================================
如何进行存货估价？（大陆会计）
==========================================================

每年都需要在资产负债表中记录存货估价。这意味着要做出两个主要选择：

- 计算储存物品成本的方法（标准价格 vs. 平均价格 vs. 实际价格）；
- 将存货价值记录到账簿中的方式（定期 vs. 永续）。

成本计算方法
==============

.. rst-class:: alternatives doc-aside

标准价格 
  .. rst-class:: values-table

  .. list-table::
     :widths: 28 18 18 18 18
     :header-rows: 1
     :stub-columns: 1

     * - 操作
       - 单位成本
       - 现存数量
       - 增量价值
       - 存货价值
     * -
       - €10
       - 0
       -
       - €0
     * - 收到 8 件产品，单价为 €10
       - €10
       - 8
       - +8*€10
       - €80
     * - 收到 4 件产品，单价为 €16
       - €10
       - 12
       - +4*€10
       - €120
     * - 交付 10 件产品
       - €10
       - 2
       - | -10*€10
         |
       - €20
     * - 收到 2 件产品，单价为 €9
       - €10
       - 4
       - +2*€10
       - €40

  **标准价格** 意味着你基于直接材料、直接人工和制造间接费用在特定期间结束时（通常为每年一次）估算成本价格。你在产品表单中输入此成本价格。

平均价格
  .. rst-class:: values-table

  .. list-table::
     :widths: 28 18 18 18 18
     :header-rows: 1
     :stub-columns: 1

     * - 操作
       - 单位成本
       - 现存数量
       - 增量价值
       - 存货价值
     * -
       - €0
       - 0
       -
       - €0
     * - 收到 8 件产品，单价为 €10
       - €10
       - 8
       - +8*€10
       - €80
     * - 收到 4 件产品，单价为 €16
       - €12
       - 12
       - +4*€16
       - €144
     * - 交付 10 件产品
       - €12
       - 2
       - | -10*€12
         |
       - €24
     * - 收到 2 件产品，单价为 €6
       - €9
       - 4
       - +2*€6
       - €36

  **平均价格** 方法在每次处理收货单时重新计算成本价格，基于相关采购订单中定义的价格：
  公式（见附件）

  当产品离开仓库时，平均成本不会改变。

  从会计角度来看，此方法在采购价格大幅波动的情况下主要具有合理性，但由于其操作复杂性，较为不常见。实际上，你需要类似 Odoo 的软件来轻松保持此成本的最新状态。

  此方法专用于高级用户。它要求建立完善的业务流程，因为处理收货单的顺序在成本计算中很重要。

先进先出（FIFO）
  .. rst-class:: values-table

  .. list-table::
     :widths: 28 18 18 18 18
     :header-rows: 1
     :stub-columns: 1

     * - 操作
       - 单位成本
       - 现存数量
       - 增量价值
       - 存货价值
     * -
       - €0
       - 0
       -
       - €0
     * - 收到 8 件产品，单价为 €10
       - €10
       - 8
       - +8*€10
       - €80
     * - 收到 4 件产品，单价为 €16
       - €12
       - 12
       - +4*€16
       - €144
     * - 交付 10 件产品
       - €16
       - 2
       - | -8*€10
         | -2*€16
       - €32
     * - 收到 2 件产品，单价为 €6
       - €11
       - 4
       - +2*€6
       - €44

  对于 **实际价格**（FIFO、LIFO、FEFO 等），成本进一步由仓库位置或产品内部类别上设置的移除策略来细化。默认策略是 FIFO。使用这种方法，你的存货价值是根据储存产品的实际成本计算的（参见定量估价），而不是根据产品表单中显示的成本价格。每当你发货时，成本价格会重置为最后一件（或几件）发货的成本。这一成本价格用于估值任何未从采购订单接收的产品（如库存调整）。

  如果你在 Odoo 中管理所有工作流程（销售、采购、库存），建议使用 FIFO。适用于任何类型的用户。

后进先出（LIFO，不被 IFRS 接受）
  .. rst-class:: values-table

  .. list-table::
     :widths: 28 18 18 18 18
     :header-rows: 1
     :stub-columns: 1

     * - 操作
       - 单位成本
       - 现存数量
       - 增量价值
       - 存货价值
     * -
       - €0
       - 0
       -
       - €0
     * - 收到 8 件产品，单价为 €10
       - €10
       - 8
       - +8*€10
       - €80
     * - 收到 4 件产品，单价为 €16
       - €12
       - 12
       - +4*€16
       - €144
     * - 交付 10 件产品
       - €10
       - 2
       - | -4*€16
         | -6*€10
       - €20
     * - 收到 2 件产品，单价为 €6
       - €8
       - 4
       - +2*€6
       - €32

  对于 **实际价格**（FIFO、LIFO、FEFO 等），成本进一步由仓库位置或产品内部类别上设置的移除策略来细化。默认策略是 FIFO。使用这种方法，你的存货价值是根据储存产品的实际成本计算的（参见定量估价），而不是根据产品表单中显示的成本价格。每当你发货时，成本价格会重置为最后一件（或几件）发货的成本。这一成本价格用于估值任何未从采购订单接收的产品（如库存调整）。

  LIFO 在美国以外地区不被允许。

Odoo 允许任何方法。默认方法是 **标准价格**。要更改此设置，请在采购设置中勾选 **使用 '固定'、'实际' 或 '平均' 价格成本计算方法**。然后在产品的内部类别中设置成本计算方法。类别显示在产品表单的库存选项卡中。

无论使用何种方法，Odoo 都提供完整的库存估价报告，路径为 :menuselection:`库存 --> 报表 --> 库存估价`（即当前库存数量 * 成本价格）。

定期存货估价
==============

在定期存货估价中，货物接收和出库对会计没有直接影响。在月末或年末，会计人员会做一份代表实物库存价值的日记账分录。

这是 Odoo 中的默认配置，并且可以开箱即用。请检查以下操作，了解 Odoo 如何管理会计分录。

.. rst-class:: alternatives doc-aside

供应商账单
  .. rst-class:: values-table

  ============================= ===== ======
  \                             Debit Credit
  ============================= ===== ======
  Assets: Inventory                50
  Assets: Deferred Tax Assets    4.68
  Liabilities: Accounts Payable        54.68
  ============================= ===== ======

  配置：
    * 采购商品：在产品或相关产品的内部类别上定义（费用账户字段）
    * 递延税资产：在采购订单行上使用的税定义
    * 应付账款：在与账单相关的供应商上定义
货物接收
  无日记账分录
客户发票
  .. rst-class:: values-table

  ===================================== ===== ======
  \                                     Debit Credit
  ===================================== ===== ======
  Revenues: Sold Goods                           100
  Liabilities: Deferred Tax Liabilities            9
  Assets: Accounts Receivable             109
  ===================================== ===== ======

  配置：
    * 收入：在产品或相关产品的内部类别上定义（收入账户字段）
    * 递延税负债：在发票行上使用的税定义
    * 应收账款：在客户（应收账户）上定义

  发票中使用的财务状况可能有一个规则，该规则将替换产品上定义的收入账户或税。

客户发货
  无日记账分录
生产订单
  无日记账分录

.. raw:: html

   <hr style="float: none; visibility: hidden; margin: 0;">

在月末/年末，公司进行实物库存盘点或仅依赖 Odoo 中的库存来估价账簿中的库存。

创建一个日记账分录，将库存变动值从利润和亏损部分转移到资产部分。

.. h:div:: doc-aside

  .. rst-class:: values-table

  ===================================== ===== ======
  \                                     借方 贷方
  ===================================== ===== ======
  资产：库存                                 X     
  费用：库存变动                                   X            
  ===================================== ===== ======

  如果库存价值减少，**库存** 账户贷记，**库存变动** 账户借记。
   
.. raw:: html

   <hr style="float: none; visibility: hidden; margin: 0;">

永续存货估价
============

在永续存货估价中，货物接收和出库会实时记录在账簿中。因此账簿总是最新的。这种模式仅适用于专家会计和高级用户。与定期估价相比，它需要一些额外的配置和测试。

让我们以一家经销商为例。

.. h:div:: valuation-chart-continental doc-aside

   .. placeholder

.. raw:: html

   <hr style="float: none; visibility: hidden; margin: 0;">

.. h:div:: doc-aside
  
   **配置：**

   - 应收/应付账款：在合作伙伴（会计选项卡）上定义

   - 递延税资产/负债：在发票行上使用的税定义

   - 收入/费用：默认在产品的内部类别上定义；也可以在产品表单（会计选项卡）中设置为替代值

   - 库存变动：在产品的内部类别中设置为库存输入/输出账户
     
   - 库存：在产品的内部类别中设置为库存估价账户

.. seealso::

  * :doc:`../../routes/strategies/removal`
  * :doc:`/applications/finance/accounting/others/inventory/avg_price_valuation`
  * :doc:`../../routes/costing/landed_costs`
